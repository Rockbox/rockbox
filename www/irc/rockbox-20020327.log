
**** BEGIN LOGGING AT Wed Mar 27 08:23:32 2002

--> Bagder (~daniel@as3-3-2.ras.s.bonet.se) has joined #rockbox
--- Topic for #rockbox is rock the box http://bjorn.haxx.se/rockbox/
--- Topic for #rockbox set by adiamas at Tue Mar 26 09:53:55
<Bagder> hey
<adiamas> welcome back
--- adiamas gives channel operator status to Bagder
<Bagder> thanks ;-)
<Bagder> we had quite a gathering here yesterday
<Bagder> as your logs might have shown
<adiamas> heheh let me scroll and see ;)
<adiamas> seems like it...
<adiamas> i wanted to play with the uisimulator on my home machine... but having issues...
<adiamas> seems that rh7.1 doesn't install the X11 headers for somereason.
<Bagder> :-(
<Bagder> btw, you should get the latest uisimulator sources
<Bagder> I updated them all day yesterday
<adiamas> yeah.. grabbed it this afternoon at work...
<Bagder> ah, ok
<adiamas> pops up a little black window..
<adiamas> white boarder with text?
<Bagder> yes
<adiamas> nods
<adiamas> i gotta take time to read the source.. no time at work...
<Bagder> most of the lcd-code is generic as it works on a buffer
<Bagder> the lcd_update() reads the buffer and makes X11-calls to draw in the window
<adiamas> damn it.. think i may have to download the neweest x
<Bagder> ouch, that's a *lot* 
<Bagder> isn't there any rh7.1 rpm with x11 headers?
<adiamas> i don't know rpms all that well :(
<adiamas> i pulled out the source from the source cd.. but not sure wtf im looking at...
<adiamas> so im playing with diff ideas
--> wavey (~wavey@dlan1431.dircon.co.uk) has joined #rockbox
<Bagder> morning wavey
<wavey> hiya bagder
<wavey> i keep reading your name as badger
<wavey> is there a meaning behind bagder?
<Bagder> hehe, I don't hold that against you ;-)
--- adiamas gives channel operator status to wavey
<Bagder> once upon the time..
<Bagder> back in.. 1987
<Bagder> I was about to pick myself a nick name
<Bagder> and this is what it turned out to be ;-)
<wavey> heh
<Bagder> I've stuck with it since
<wavey> same here, but it was 1991
<wavey> i was asked to give a name for a MUD
<wavey> and this one came out of nowhere
<wavey> and it stuck
<Bagder> I actually *did* intend to spell it badger
<Bagder> but I was a bad reader or writer or something ;-)
<wavey> heh excellent
<Bagder> then I thought the dyslexic style was kinda fun 
<wavey> should reduce the number of nick collisions, etc :)
<Bagder> yeps
<wavey> except on #dyslexic-animals
<Bagder> bwahaha
<adiamas> okay.. are you guys familar with rpms?
<Bagder> somewhat
* wavey is more of a debian man, but go on
<adiamas> well.. i don't ever use them...
<adiamas> im a jedi, i use the source luke
<wavey> heh
<adiamas> anyways... i have like 20 rpms for various forms of X11.. all i want are the friggin headers since rh7.1 didn't install witht hem...
<adiamas> is there and easy way to get at them?
<Bagder> isn't there like a x11-devel package or something?
<adiamas> and an easier question ;)  when charging your players.. have you run the batteries all the way down? and if so, how long did it take charging for you before it held the charge?
<wavey> you can unpack an rpm  without installing it to get files out, yes
<wavey> and i've run the batteries down a few times
<wavey> but never in one continuous go
<wavey> and i always charge overnight
<wavey> or even continuously
<wavey> so dunno
<adiamas> nods
<adiamas> it seems like its taking forever for this to take a charge again...
<Bagder> me neither, I haven't even had mine a week yet
<adiamas> and yeah.. theres a dev version...
<adiamas> but 7.1 is so bitch slapped i think im just going to pick up a new distro tomorrow...
<adiamas> think i might borrow a buds suse...
<adiamas> 7.1 shipped with a dev snap shot of gcc that was fucked.
<wavey> isn't 7.x really old?
<wavey> i haven't looked at rh for yearsa
<Bagder> 7.2 is the most recent, there's a 7.3 beta available
<wavey> ok, my bad
<adiamas> yeah... 
<adiamas> but im starting to really dislike the rh distro...
<adiamas> Bagder: what distro are you runnin?
<Bagder> rh 6.1 I believe, patched and upgraded beyond recognition ;-)
--> Zagor (~bjst@labb.contactor.se) has joined #rockbox
<wavey> ad: how long is 'forever'? to take a charge?
<Bagder> hej Zagor
<Zagor> morning
<wavey> morning
<Bagder> Zagor: I feel a need for some source code organization from you ;-)
<Zagor> bagder, don't put those dir in the root. make a 'firmware' top dir to put them in
<adiamas> morning...
<Bagder> you mean uisimulator root?
<Zagor> no, the ones you mailed about. the target code.
<adiamas> wavey im looking at hmmm.. i was home by 23:30 est, and it's now 3:30 est
<Zagor> uisimulator is fine in the root, i think
<adiamas> so 4 hrs?
<Bagder> ah, right I didn't intend to put them in the root
<Zagor> ok, good
<adiamas> but i _really_ drained the batteries.
<Bagder> I thought of having a 'rockbox' module, as a name for the firmware
<Zagor> maybe a bit too general?
<Bagder> Zagor: but I was actually thinking of leaving that task to you ;-)
<Zagor> ah :)
<Bagder> as head of the team
<Bagder> I'm getting confused of all the various source code archives now ;-)
<Zagor> hehe
* adiamas pokes zagor 
<adiamas> so.. should i antagonize you about getting added to source forge team?
* adiamas grins wildly
<Zagor> hmm, did you send me your sourceforge user name?
<adiamas> nods
<adiamas> same one as here "adiamas"
<Zagor> ok. sorry, i must have missed it. i'll add you right away
<adiamas> and should we call this room "everyone gets op status bu Tumm"?
--- Bagder gives channel operator status to Zagor
<adiamas> hehe no prob..
<adiamas> just want to post ver. 1 of FAQ
<adiamas> its really basic and typo ridden.
<adiamas> i can't spell for crap.
<Zagor> no problem
<adiamas> but i figure once your happy, you post it where you see fit.
<Zagor> yup
<adiamas> Bagder btw.. when i was looking at the code for uisim, something odd...
<adiamas> the first function in screenhack.c, merge_options...
<adiamas> i was playing with the structs, just to test something we've been doing at work 
<adiamas> you do a memcpy, and i was playing with structure copies... they are a bit faster, but when i did it the size of the displyed box (not the white box, the surrounding box) tripled...
<Bagder> as the header of that file explains, it's been ripped-out from xscreensaver
<adiamas> any idea why?
<Bagder> no I don't, I'm not that well aquinted with those functions
<adiamas> hehehe k... ill go back then... was just the first thing i played with.
<Zagor> adiamas: you
<Zagor> are added now
<adiamas> ?
<adiamas> sweet.
<Zagor> "Doc Writer" :-)
<Bagder> Zagor: suggestion for a new page: cvs info, that sourceforge one is too hard to find and too generic
<Zagor> good point
<Zagor> i'll see if i can fix all the cvs issues today
<Zagor> including putting the web page in cvs
<adiamas> hehe Doc Writer works for me till i get my <insert profane insult here> box working better.
<Bagder> that would be really neat
<Zagor> tumm, who are you? i haven't seen you before.
<Bagder> I think he's asleep
<Zagor> ok
<Zagor> well, the more the merrier :)
<Bagder> Gary sure is one active guy
<Zagor> yeah
<Zagor> we have attracted a wonderfully productive crowd!
<Bagder> indeed
<Zagor> maybe i'm the exception. i spent last night playing cstrike :*)
<Bagder> we might consider putting named people in charge of various sub modules
<Bagder> haha
<Bagder> I got some really stupid problems with my Archos mounted filesystem yesterday
<Zagor> ok?
<adiamas> what problems?
<Bagder> when cp -r'ing
<Bagder> it failed, saying that the filesystem is read-only
<Zagor> whoa!
<Bagder> several times
<Zagor> sounds bad
<Bagder> I umunted and re-mounted and I could do it again
<Zagor> did you have usb-storage debug on?
<Bagder> no
<Bagder> it copies maybe a hundred files before it bails out
<adiamas> ive actually had that...
<adiamas> but it happened when i was in win, not linux... :(
<Zagor> hmmm, i can't remember how much i've copied to the recorder
<adiamas> thats when i got that corrupted file.
<Bagder> this is a 2.4.18 kernel
<adiamas> i did 500+ files today in one shot
<adiamas> hmmm same here.
<Zagor> i have a 2.4.17
<Zagor> but i only use ehci (usb 2.0) since i got it
<Bagder> my card arrived yesterday (at Contactor) so I'm soon gonna be there too ;-)
<Zagor> it's schweet! :)
<wavey> i xferred 32 cds of mp3 to my recorder in 1 1/2 hours with usb2
<wavey> that's 3500 songs
<wavey> 350 cd
<wavey> fuckin' a.
<Bagder> :-)
<adiamas> small house keeping question, cause im anal... umm... logging, will we be relying on printf to the screen, or an actual log file?
<Bagder> in uisimulator you mean?
<adiamas> cause i see you have a Logf() in uibasic.c
<adiamas> nods
<adiamas> kinda pointless to keep a log on the player ;)
<Bagder> my original intent was to use the log function
<Bagder> but then I lost my dicipline ;-)
<Bagder> also, some of the printf() things are placed in "actual" code, and we need to define how to deal with that
<adiamas> hehe well.. for what its worth... dicipline may be what we want to set this early :) its gonna be a pain in the arse to break habits later :)
<Bagder> on a global basis
<Bagder> you're right
<adiamas> i have a suggestion on that
<adiamas> something that seemed to work for me...
<adiamas> since we are doing "functionname(char *format, ...)
<adiamas> we just #define the function name, use that... then when/if you want to tear it out its a bit easier
<Zagor> i don't get it. what's the gain?
<adiamas> nothing significant.. i was just refering ot the "actual" code bit...
<Zagor> oh
<adiamas> doing dev, having it there is fine, but if you want to bring it o the player you want and easy way to remove it.
<Bagder> a #define macro can't use a variable amount of parameters, in ansi
<adiamas> and config files are out of the question in this case.
<adiamas> thats not what i mean... 
<adiamas> i mean: #define PRINTFUNC printf
<Bagder> aha
<adiamas> then just: PRINTFUNC("%s", "we are cool")
<adiamas> then you want to turn it off, then you just have PRINTFUNC point to an empty funciton
<adiamas> *poof*, no more output
<Bagder> but that still makes calls to code
<adiamas> nah, optimized out
<Bagder> only if in the same source
<Zagor> #define PRINTFUNC //
<Zagor> :)
<Bagder> hehe
<adiamas> yeah... 
<adiamas> heheh
<Zagor> ugly, i know
<Bagder> that's a bit "brual" ;-)
<adiamas> i like that better :)
<adiamas> brual?
<Bagder> why not just PRINTF(("%s", "rockboxk")); ?
<Bagder> then you can #define PRINTF
<Bagder> completely 
<Zagor> it gives really weird errors if you do a multi-line PRINTFUNC call
<adiamas> i don't get it.
<Bagder> #define PRINT printf x
<adiamas> oh, got ya
<adiamas> honestly, id just have issues with that on a readablity level
<adiamas> but thats just me
<Bagder> I have no strong feelings about either way really
<Bagder> we should define a single way to do it, and stick with it
* adiamas defers all decision making to you european types ;)
<adiamas> that i agree with...
<adiamas> and please please please, someone post preferences on how code is to be indented/spaced etc...
<adiamas> i get enough of 19 diff ppls ideas of formating at work...
<wavey> code layout is so unimportant
<adiamas> be nice to have something everyone is expected to stick with.
<wavey> as long as it's readable
<wavey> and runnable
<Bagder> we could have a "prefered" style, but allow stubborn people to use their own
<adiamas> readable is the problem.
<adiamas> nods.. thats what i ment.
<wavey> readable is common sense
<adiamas> i dont mean we take a LART to someone for putting a { on the wrong line.
<wavey> and no two people agree on styles
<Bagder> true
* adiamas thinks wavey hasn't seen what passes for 'readable' in his office
<Bagder> heheh
<wavey> and code beautifiers can be built into a makefile
<Bagder> beautifiers are no good for versioning
* adiamas watches cvs explode
<wavey> no, you beautify locally
<Bagder> right
<wavey> according to how you like code
<wavey> and you can do a 'standard' beautify before the check-in
<wavey> if these things matter to you
<wavey> cvs sucks ass, anyhow 
<Bagder> it's the best we have...
<adiamas> how do you do a standard beautify before check in? rely on the person remembering?
<wavey> i don't like non-exclusive versioning systems
<adiamas> define non-exclusive?
<wavey> adiamas incorporate it into the makefile
<Bagder> wavey: when doing global development, that's the only thing that works
<wavey> make checkin
<adiamas> nods
<wavey> bag: alas, yes
<adiamas> thought so.. tired, so checking :)
<wavey> non-exclusive == if i have it checked out, you can't touch it
<Zagor> wavey: i wouldn't want to admin a global project with exclusive checkout... :)
<wavey> zag: depends on the numbers, not the geographical distribution.. ;)
<Zagor> correct
<Bagder> I don't think the problem with CVS is the non-exclusiveness
--> alkorr (jbcoax@srs07v-1-85.n.club-internet.fr) has joined #rockbox
<wavey> hey alan
<alkorr> hi
<alkorr> well i'm planning to do an ARCHOS.MOD as a loader for a not scrambled rockbox.bin binary
* Bagder needs more coffee
<wavey> cvs will work fine for us - and i'm not ungrateful for sourceforge providing it..
--> linus (~linus@labb.contactor.se) has joined #rockbox
<wavey> hey linus
<linus> Yo!
<alkorr> yo Linus
<linus> I just dug up my FAT code. It isn't that much really. It was originally intended to be a general FAT12/16/32 driver, with emphasis on FAT16. It was for another project.
<linus> It is only working in a simulated environment, in Linux.
<alkorr> yes, ok I retrieve some of my FAT32 source but a little bit old compared with the last I've lost
<alkorr> so it could be interresting to merge
<linus> Yup. I'll give it to Björn, and he will upload it to the web site.
<Bagder> hey linus
<linus> hey Bagder
<alkorr> well tell me if you are okay for what follows :
<alkorr> - only FAT32
<alkorr> - filesystem directly use ATA, no generic device
<alkorr> - ATA only handle primary controller and the master device (our HD)
<alkorr> are you okay with that ?
<alkorr> or do you want something else ?
<Bagder> I believe in incremental development
<Bagder> anything is fine
<Bagder> we improve it later if need be
<linus> It's perfectly OK. There's no need to develop any code that we won't use. I was planning to rip out the FAT12/16 stuff anyway, since the project it was intended for died.
<alkorr> must we handle only one partition ?
<linus> I don't see a problem handling several partitions, but let's start with only one primary partition.
<alkorr> ok
<alkorr> it is not a problem for me, it's just some code to add for having them
<alkorr> the only problem is how the user will see all the partition on his/her JB
<linus> That's why we should wait with that feature.
<alkorr> ok
<alkorr> i'm not sure about that, but did you know for people who have a recent JBR if their hd have a MBR or a direct FAT32 (true removable hd)
<alkorr> ?
<linus> I have no idea.
<Bagder> then you have to add that feature
<Bagder> we can't know all at once anyway
<alkorr> the old JBP and JBR cannot read direct FAT32 because of their old firmware 
<alkorr> badger ? your hd on you JBR is the original ?
<linus> I'm not sure I follow you. What is "direct FAT32"?
<Bagder> yes
<Bagder> I just got mine
<alkorr> can you have a look on the first sector to see its signature, a MBR or a FAT32 ?
<alkorr> unless you did format it
<Bagder> what tool can show the first sector like that?
<linus> My Recorder HD had one primary FAT32 partionaccording to FDISK, before I reformatted it... :-(
<alkorr> mc
<Bagder> ok, I'll try to remember to do that tonight
<alkorr> linus : a normal hd has a MBR with a partition table 
* adiamas growls at CVS
<alkorr> mc, look for /dev/sda, press F3, switch to hexa mode, that's all 
<linus> FDISK seemed to recognize a partition table when I put the recorder HD in my laptop yesterday.
<Bagder> alkorr: will do, I don't have access to it now
<alkorr> linus : a removable disk can have no MBR, i.e, it has no partition at all. Instead, it has a FAT32 boot sector at the very first physical sector
<linus> I just gave the FAT code to Björn. Be aware, it is undocumented, and implemented straight from the Microsoft specification, so it is in no way optimized. It cad create empty files and directories.
<alkorr> Badger : yes I know, I just gave you the instructions to check
<Bagder> ok
* Bagder logs everything said here, saves him from taking notes ;-)
<alkorr> :)
<alkorr> linus : no problem :), Windows can read that kind of removable hd
<alkorr> linus : but old firmware don't know that
<alkorr> for those who used Windows 98 SE, it is very complicated to format
<alkorr> because you need to put the hd as removable to access it, but not removable to format it :/
<alkorr> Björn ? how must I do to take Linus'source ?
<Zagor> wait :)
<alkorr> oh okay :)
<linus> Interesting. I just did that yesterday. I attached the redorder with an empty HD and partitioned it using FDISK. Was that the wrong way to do it?
<alkorr> are you interested with a simple ARCHOS.MOD as a loader for our rockbox.bin which wouldn't need to be scrambled ?
<alkorr> linus : an empty hd ?
<alkorr> linus : via USB or a ATA converter cable ?
<Zagor> alan: http://bjorn.haxx.se/rockbox/tmp/fat.tar
<linus> Well, brand new HD, via USB.
<alkorr> okay
<alkorr> it's strange, because Windows can only reckonize USB disk as logical disk...
<alkorr> at least it is what happens when I use WinHex...
<linus> So you mean that FDISK shouldn't be able to access the partition table of the Recorder?
<alkorr> DOS Fdisk ? Windows FDISK ?
<alkorr> or linux fdisk ?
<alkorr> a logical disk is a partition
<alkorr> a physical disk is the entire hd
<alkorr> with WinHex i cannot access USB disk as physical disk, So i cannot retrieve the MBR for USB disk, even I know it exists
<linus> Sorry. I ran FDISK in a DOS windows in Win98SE
<alkorr> was it an Archos disk using the chipset ISD200 ?
<linus> I created a primary partition (man those "integrity checks" tokk some time...) and then formatted it in Explorer.
<linus> I would have done it in Linux if it hadn't hung badly when I connected the Recorder... :-(
<adiamas> hmmmmm
<alkorr> So your BIOS is able to read the recorder HD !? i thought ISD200 was not totally compliant with USB Mass Storage
<adiamas> i had that issue today to...
<adiamas> matter of fact..
<adiamas> my recorder battery died.. caused linux to hang so bad i had to hard reboot
<linus> Alan: remember. The Recorder is an ISD300 device.
<alkorr> oh yes !!!!
<alkorr> okay i'm speaking about ISD200 !!!
<linus> Now we're talking. I had to use Linux when I did the same thing with my Player.
<alkorr> okay okay you don't even need a driver for Windows with ISD300 i suppose
<adiamas> okay.. sorry all you european studs you.. but this american needs sleep..
<adiamas> see you in a few
adiamas alkorr <Bagder> night adiamas
--- adiamas is now known as adiamas|sleeping
<linus> I really don't know. When I connected my Recorder the first time, Windows asked for a driver disk, and I inserted the CD that came with the Recorder.
<alkorr> Zagor ? what do you think about ?
<alkorr> well, if your DOS is able to access your recorder, that means your BIOS has capability to see USB hd (i.e, those which are really compliant with USB Mass Storage)
<alkorr> Maybe if you don't give the CD, Windows will find another driver in its database
<alkorr> maybe maybe
<alkorr> anyway it is good for you not to be blocked :)
* Zagor thinks windows wants drivers for everything...
<alkorr> linus : i'm looking at your work
<alkorr> your fat entry cache is one sector ?
<linus> Nope. It is as many sectors as you need.
<alkorr> the reason why you use a malloc...
<linus> Actually it's 256 sectors. Look at line 71.
<alkorr> ok
<linus> As you see, a lot can be removed, since we don't intend to support FAT16. And in many places, I only have support for FAT12/16. We have work to do.
<alkorr> lfn ?
<alkorr> i must leave you. CU
<-- alkorr has quit ()
<wavey> can we get the logs of this channel sent to the website?
<wavey> they're very interesting
<wavey> any many people would be interested 
<Zagor> good idea
<Bagder> I can collect my logs so far
<linus> Daniel! Don't press DELE*...
<linus> Off for lunch. CU in a few.
<Zagor> same here
--- Tumm is now known as coyote
<Bagder> he's alive! ;-)
<wavey> if uncommunicative ;)
--> alkorr (jbcoax@srs04m-8-243.n.club-internet.fr) has joined #rockbox
<alkorr> re-hi
<Bagder> alkorr: what's your surname? I'm typing up a little nick => real name list for posting the logs
<alkorr> i've no nickname. Alkorr is not enough ?
<wavey> alan korr, i think, yes?
<Bagder> people might want to know the real name, who's behind the nick
<alkorr> Alan Korr, my nickmane : Alkorr
<Bagder> ok, thanks
<alkorr> Alan Korr
<alkorr> just a question for Linus : did my rockbox work with serial ?
<Bagder> he's away, eating
<alkorr> right
<Bagder> now, as soon as Björn has made the web updated vis CVS, I can just add the log there ;-)
<Bagder> s/vis/via
<alkorr> arf :)
<alkorr> you'r a fan of GREP ;)
<alkorr> okay i'll be here in one or two hours
<alkorr> good lunch
<-- alkorr has quit ()
<-- coyote has quit (zahn.openprojects.net irc.openprojects.net)
--> coyote (coyote@dreamhosted.borlange.se) has joined #rockbox
<Zagor> hey, coyote
<Bagder> Zagor: how's the www cvs going?
<Zagor> it's just about ready
<Zagor> i'm just reorganising a few things. the scramble tools, for instance, gets a cvs dir of their own
<Zagor> also, I need to fix something about the load balancer
<Zagor> which of .html and .cgi has priority by default in apache?
<Bagder> I think it checks them in the order used in the config
<Bagder> index.cgi vs index.html that is
<Zagor> yeah. but that's not what I want to head :-)
<Zagor> hear
<Zagor> ok, so we'll have to remove index.cgi in the cron job on sourceforge.net. not a problem
<Bagder> or, you can just don't add it to cvs
<Zagor> yup. but i wanted it in cvs, so it's already there
<Bagder> :-)
<Bagder> btw, we could also use a new mailing list for cvs commits
<Bagder> its a great way to keep up with development
<Zagor> yes
<Bagder> if you name a directory within www, I could put yesterday's irc log there :-)
<-- wavey has quit (Read error: 110 (Connection timed out))
--> alkorr (jbcoax@srs06m-7-196.n.club-internet.fr) has joined #rockbox
<alkorr> linus : are you here ?
<linus> Helooooo!
<alkorr> hi linus
<Zagor> bagder: 'irc' sounds good to me
<linus> I'm sitting with your code trying to get it to run on my jukebox
<Zagor> we'll make an index page with info about server/channel, and then links to the logs
<alkorr> okay, if you have some questions, don't fear to ask
<linus> UIE6A at 900014be
<alkorr> you caught an exception ?
<linus> Yup.
<Bagder> Zagor: I added the dir and put the log there just now
<alkorr> exception 106 : TXI1
<Zagor> ok
<Bagder> Zagor: there's a short nick => real name list at the top of the log, it could probably be put on the main page too
<Zagor> ok
<alkorr> is abnormal, you shouldn't get it because I don't use interrupt when transmitting
<linus> You might have turned it on by mistake, since you do use it for receiving.
<alkorr> SH1 tries to call an interrupt TXI1 but as i don't code an interupt TXI1, it defaults to a UIE
<alkorr> yes but it's strange, because I never caught this interrupt
<alkorr> let me have a look on SH1 hardware manual
<alkorr> SCI1SCR is set to 0x70, which means only RIE,TE and RE is set
<alkorr> RIE = Receive Interrupt Enable
<linus> Yeah, I saw that too...
<alkorr> TE = Transmit Enable (nothing to do with interrupt)
<alkorr> etc.
<linus> By the way, you never called serial_setup() in the code you sent me.
<alkorr> yes because I did in setup ()
<alkorr> setup () contains all the initial setup for most ports
<alkorr> included SCI1
<alkorr> setup is in main.c
<linus> Now I see. Why do you do that instead of using serial_setup()?
<alkorr> well serial_setup was just an extra in case we need it elsewhere
<Zagor> bagder: doesn't "cvs update" make new dirs?
<Zagor> i just updated the sf page, and didn't get the irc dir
<Bagder> no, make a habit of using "up -dP"
<alkorr> I prefer concentrate all initialisation in one setup () with direct access on port for a smaller code
<Zagor> ah
<Bagder> -d for make dir, -P for delete removed files
<alkorr> quite now i never use serial_setup (a old code)
<linus> I understand. I have another opinion, but never mind. Let's find out whywe get that interrupt...
<alkorr> my intention is to have the smallest code possible for the final rockbox so we can have the largest space for buffer
<alkorr> a choice to do
<linus> Good idea
<Bagder> me like inlined functions then, best of both worlds
<alkorr> so, without changing my code, you caught this interrupt ?
<alkorr> that's true, Badger, i should try do so too to check i didn't lose space that way
<Zagor> btw, alan. he's "bagder", not "badger". it
<alkorr> sorry :)
<Zagor> 's an old story :)
<Bagder> it proves he's not using tab completion ;-)
<Zagor> haha
<alkorr> Bagder, are you sure ?
<alkorr> :)
<Bagder> that would be french tab complettion then :-)
<Zagor> tab completion to a dictionary, perhaps ;)
<alkorr> yes i forget this capability :)
<alkorr> very practical indeed
<alkorr> ok, linus, can you tell if you made a change before catching this interrupt ?
<alkorr> linus, add a new interrupt in serial.c
<alkorr> or let me change my serial.c and i will send it to you
<linus> Alan, I removed my extra call to serial_setup(). Now I get "OK WORKING", but no serial communication seems to work
<alkorr> ok, it looks as if my software is no good
<alkorr> if only i could remember what i did to make it work before my hd crashing :(
<linus> I'll look into it. Hang on.
<alkorr> linus : we must check if REI1 is called
<alkorr> add : "	}
<alkorr> add : "lcd_goto (0,0); lcd_puthex (QI(SCISSR1),2);" in REI1
<alkorr> it will display in hexa the byte read for Serial Status Register (overrun,frame or parity error)
<Bagder> Zagor: you should add Gary to the activity table
<Zagor> ok
<alkorr> oh wait, and if PB10 and PB11 is not set as serial pins in setup () ? i'm checking them
<Zagor> bagder: ui simulator?
<Bagder> lcd code and ui sim for windows at least 
<Zagor> ok
<Zagor> did rob ever put his faq anywhere?
<Bagder> I don't think so
<alkorr> Linus, check for BAUDRATE and PHY at the begining of system.h
<linus> 12MHz and 9600
<alkorr> 9600 is okay for you ?
<linus> Yup.
<alkorr> well, when there is no serial jack pllugged on my JBP, it displays "OK WORKING!"
<alkorr> the same thing when pluged but nothing in my serial terminal
<linus> Are you sure that you don't loop the serial data in your PC?
<alkorr> what do you mean by looping ?
<linus> Echoing
<alkorr> i echo what I get not what i put
<alkorr> I = sh1
<alkorr> there is no echo from the PC side
<linus> Got it!
<alkorr> so ?
<linus> You have to insert a small delay before enabling TX and RX (SCR1 = 0x70). I made a while(i++ < 30000);
<alkorr> ok
<alkorr> good to know
<linus> As the manual says: "one bit time"
* Bagder grins
<linus> I spent quite a few hurs myself with exactly the same problem. I should have remembered that... :-)
<alkorr> ok you know what i did ?
<alkorr> i just put the last SCISCR1 = 0x70 just after setting interrupt priorities and it woks now
<alkorr> so we don't need a very long delay
<alkorr> very good now i can display messages on my serial terminal :)))))))
<alkorr> thanks to you Linus, I thought about that but i was sceptical :) finally you did the right thing
* Bagder hoorays
<alkorr> ok i will see later
<alkorr> bye
<-- alkorr has quit ()
<linus> Gotta go now. CU!
<-- linus has quit ("Leaving")
--> alkorr (jbcoax@srs08m-5-139.n.club-internet.fr) has joined #rockbox
<alkorr> oh linus is left, well okay.
<-- alkorr has quit (Client Quit)
<Zagor> gotta run. see you guys
<Bagder> bye!
<Bagder> I figure the day is over now, I'll clear off as well
**** ENDING LOGGING AT Wed Mar 27 16:27:55 2002

